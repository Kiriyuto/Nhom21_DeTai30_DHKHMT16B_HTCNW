<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script>
        let sp1 = {hinhanh: "../images/pic1.jpg", dongia:100, soluong: 10};
        let sp2 = {hinhanh: "../images/pic2.jpg", dongia:200, soluong: 100};
        let sp3 = {hinhanh: "../images/pic3.jpg", dongia:10, soluong: 10};
        let sp4 = {hinhanh: "../images/pic4.jpg", dongia:300, soluong: 50};
        let sp5 = {hinhanh: "../images/pic5.jpg", dongia:120, soluong: 10};

        let dssp = [sp1, sp2, sp3, sp4, sp5];

        let i = 0;

        function napSanpham(sanpham, index){
            let tbl = document.getElementById("myTable");
            let row =" <tr><td>"+(++i)+"</td><td><img width='200' src="+sanpham.hinhanh+"></td><td>"+sanpham.dongia+"</td><td contenteditable='true' onkeyup='tinhTongtien();'>"+sanpham.soluong+"</td><td>"+sanpham.soluong * sanpham.dongia+"</td></tr>";
            let newRow = tbl.insertRow(tbl.rows.length);
            newRow.innerHTML = row;
        }

        function tinhTongtien(){
            let tbl = document.getElementById("myTable");
            let tongtien = 0;
            for(let i = 0; i < tbl.rows.length; i++){
                let dongia = tbl.rows[i].cells[2].innerHTML;
                let soluong = tbl.rows[i].cells[3].innerHTML;
                let thanhtien = dongia * soluong;
                tbl.rows[i].cells[4].innerHTML = thanhtien;
                tongtien += thanhtien;
            }

            document.getElementById("lblTongtien").innerHTML = tongtien;
        }

        window.onload = function(){
            dssp.forEach(napSanpham);
            tinhTongtien();
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Hình ảnh</th>
                            <th>Đơn giá</th>
                            <th>Số lượng</th>
                            <th>Thành tiền</th>
                        </tr>
                    </thead>

                    <tbody id="myTable">
                    </tbody>

                    <tfoot>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td class="font-weight-bold">Tổng thành tiền</td>
                            <td class="font-weight-bold"><label id="lblTongtien"></label></td>
                        </tr>
                    </tfoot>
                </table>

            </div>
        </div>
    </div>
</body>
</html>